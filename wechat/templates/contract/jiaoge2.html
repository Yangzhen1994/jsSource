<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="text/html;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Cache-Control" content="no cache"/>
    <meta http-equiv="Expires" content="0"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no"/>
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <title>交割登记_修改</title>
    <script src="../../js/frame/jquery-1.8.2.min.js"></script>
    <link rel="stylesheet" href="https://cdn.bootcss.com/weui/1.1.2/style/weui.min.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/jquery-weui/1.2.0/css/jquery-weui.min.css">
    <script src="../../js/DcUtils.js"></script>
    <script src="../../js/common.js"></script>
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/jiaoge.css">
</head>
<body>
<div class="header_box border_bottom"><img src="../../img/house_list/back.png" class="back"/>交割登记</div>
<div style="height:0.48rem;margin-bottom: 0.1rem;"></div>
<div class="jiaoge2_box">
    <div class="molabel">
        <span>押金退还金额</span>
        <input type="text" id="money" placeholder="请输入金额"/>
    </div>
    <div class="molabel">
        <span>押金扣款说明</span>
        <input type="text" id="addinfo" placeholder="请输入押金扣款说明"/>
    </div>
    <div class="box1"><span class="addBtn">+ 添加</span></div>
    <table>
        <tr><th>物品/费用项</th><th>搬入时</th><th>搬出时</th><th>操作</th></tr>
        <!--<tr>
            <td><input type="text" value="1" readonly="true"/></td>
            <td><input type="text" value="2" readonly="true"/></td>
            <td><input type="text" value="3" readonly="true"/></td>
            <td>
                <img src="../../img/feedback/Bitmap3.png" class="fill_btn"/>
                <img src="../../img/feedback/del_btn.png" class="del_btn" onclick="delfuc($(this))"/>
            </td>
        </tr>
        <tr>
            <td><input type="text" value="1" readonly="true"/></td>
            <td><input type="text" value="2" readonly="true"/></td>
            <td><input type="text" value="3" readonly="true"/></td>
            <td>
                <img src="../../img/feedback/Bitmap3.png" class="fill_btn"/>
                <img src="../../img/feedback/del_btn.png" class="del_btn" onclick="delfuc($(this))"/>
            </td>
        </tr>
        <tr>
            <td><input type="text" class="edit"/></td>
            <td><input type="text" class="edit"/></td>
            <td><input type="text" class="edit"/></td>
            <td><img src="../../img/feedback/del_btn.png" class="del_btn" onclick="delfuc($(this))"/></td>
        </tr>-->
    </table>
    <button>保 存</button>
</div>
</body>
<script src="https://cdn.bootcss.com/jquery-weui/1.2.0/js/jquery-weui.min.js"></script>
<script>
    var newNode=[];
    newNode.push('<tr class="newtr">');
    newNode.push('<td><input type="text" class="edit"/></td>');
    newNode.push('<td><input type="text" class="edit"/></td>');
    newNode.push('<td><input type="text" class="edit"/></td>');
    newNode.push('<td><img src="../../img/feedback/del_btn.png" class="del_btn" onclick="delfuc($(this))"/></td>');
    newNode.push('</tr>');
    //新增
    $(".addBtn").click(function(){
        if($(".jiaoge2_box table .newtr").length>0){
            for(var i=0;i<3;i++){
                if($(".jiaoge2_box table .newtr").eq($(".jiaoge2_box table .newtr").length-1).find("input").eq(i).val()==""){
                    $.alert("请先补全新增列后再行添加！");
                    stopScroll($('.weui-mask'));
                    return false;
                }
            }
            $(".jiaoge2_box table").append(newNode.join(""));
        }else{
            $(".jiaoge2_box table").append(newNode.join(""));
        }
    })
    //可编辑
    $(".fill_btn").click(function(){
        $(this).parents("tr").find("input").attr("readonly",false).addClass("edit");
    })
    //删除
    function delfuc(demo){
        demo.parents("tr").remove();
    }
    //保存
    $(".jiaoge2_box button").click(function(){
        if($("#money").val()==""){
            $.alert("请输入金额");
            stopScroll($('.weui-mask'));
            return false;
        }
        if($("#addinfo").val()==""){
            $.alert("请输入押金扣款说明！");
            stopScroll($('.weui-mask'));
            return false;
        }
        if($(".jiaoge2_box table .newtr").length>0){
            for(var i=0;i<3;i++){
                if($(".jiaoge2_box table .newtr").eq($(".jiaoge2_box table .newtr").length-1).find("input").eq(i).val()==""){
                    $.alert("请补全新增的物品列，没有则删除！");
                    stopScroll($('.weui-mask'));
                    return false;
                }
            }
        }
        setTimeout(function () {
            $.alert("保存成功！");
            stopScroll($('.weui-mask'));
        },200)
    })
</script>
</html>