<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta charset="UTF-8">
    <meta charset="UTF-8">
    <meta content="text/html;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Cache-Control" content="no cache"/>
    <meta http-equiv="Expires" content="0"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no"/>
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <title>我要预约</title>
    <link rel="stylesheet" href="https://cdn.bootcss.com/weui/1.1.2/style/weui.min.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/jquery-weui/1.2.0/css/jquery-weui.min.css">
    <script src="../../js/frame/jquery-1.8.2.min.js"></script>
    <script src="../../js/DcUtils.js"></script>
    <script src="../../js/HttpUtils.js"></script>
    <script src="../../js/common.js"></script>
    <link rel="stylesheet" href="../../css/common.css">
    <style>
        body{
            background: #fff;
        }
        .yuyue_form {
            padding: 0.27rem 0.26rem 0.375rem 0.375rem;
            width: 100%;
            box-sizing: border-box;
            background: #fff;
        }
        .yuyue_form .input_wrap{
            width: 100%;
            height:0.6rem;
            position: relative;
        }

        .yuyue_time input{
            width: 85px;
            height: 40px;
            margin-top: 15px;
            border: none;
            color: #ff7c00;
            font-weight: bold;
            font-size: 14px;
            margin-left: 0px;
        }
        .yuyue_time img{
            width: 20px;
            cursor:pointer;
            height: 25px;
            margin-left: -26px;
            margin-top: 20px;
        }
        .yuyue_time .yuyue_remark {
            line-height: 69px;
            color: #e7e7e7;
            font-size: 12px;
            margin-right: 45px;
        }

        .yuyue_submit{
            width: 3rem;
            height: 0.48rem;
            margin-top: 0.2rem;
            color: #fff;
            background: #ff890c;
            background-image: linear-gradient(90deg, #FFAB42 0%, #FF8200 100%);
            border-radius: 0.04rem;
            -webkit-border-radius: 0.04rem;
            -moz-border-radius: 0.04rem;
        }

        .date_area{
            margin-top:0.26rem;
            margin-bottom: 0.08rem;
        }

        .date_area .title,.time_area .title,form>.title{
            font-family: PingFangSC-Medium;
            font-size:0.14rem;
            color: #444444;
            letter-spacing: 0;
            margin-bottom: 0.12rem;
            height: 0.14rem;
            line-height: 0.14rem;
        }
        form>.title{
            margin-bottom: 0;
        }
        .date_wrap{
            display: flex;
            flex-wrap: wrap;
            justify-content: flex-start;
        }
        .date_item{
            width: 0.5rem;
            height: 0.56rem;
            background: #FFFFFF;
            border: 1px solid #D8D8D8;
            margin-right: 0.12rem;
            margin-bottom: 0.09rem;
            box-sizing: border-box;
        }
        .date_item_num{
            font-family: PingFangSC-Medium;
            font-size: 0.18rem;
            color: #444444;
            letter-spacing: 1px;
            text-align: center;
            line-height: 0.18rem;

        }
        .date_item_week{
            width: 100%;
            height: 0.22rem;
            font-family: PingFangSC-Regular;
            font-size: 0.14rem;
            color: #FFFFFF;
            letter-spacing: 0;
            line-height: 0.22rem;
            text-align: center;
            background: rgba(0,0,0,.2);
        }
        .date_item_num{
            width: 100%;
            height: 0.32rem;
            line-height: 0.32rem;
            text-align: center;
            background: #FFFFFF;
            font-family: PingFangSC-Medium;
            font-size: 0.18rem;
            color: #444444;
            letter-spacing: 1px;

        }

        .date_item.current{
           border: 1px solid #ff8200;
        }
        .date_item.current .date_item_week{
            background: #FF8200;;;border: 0px solid #ff8200;
        }
        .date_item.current .date_item_num{
            background:rgba(255,130,0,0.10);
        }


        input[type=text]{
            position: absolute;
            bottom:0.1rem;
            height: 0.17rem;
            font-size: 0.12rem;
            color: #444;
            box-sizing: border-box;
            left: 0.17rem;
            width: 100%;
        }
        .star{
            position: absolute;
            bottom: 0.05rem;
        }
        .yzm_btn_span{
            display: block;
            width: 0.88rem !important;
            box-sizing: border-box;
            padding-left: 0 !important;
            height: 0.32rem !important;
            line-height: 0.32rem !important;
            right: 0px;
            font-size: 0.12rem;
            text-align: center;
            color: #FF8200;
            white-space: nowrap;
            background: rgba(255,130,0,0.10);
            border: 0 solid #FF8200;
            border-radius: 0.0225rem;
            -moz-border-radius: 0.0225rem;
            -webkit-border-radius: 0.0225rem;
            bottom:0.09rem;
        }
        .yzm_btn_span:before{
            border: 1px solid #ff8200;
            border-radius: 0.0225rem;
            -moz-border-radius: 0.0225rem;
            -webkit-border-radius: 0.0225rem;
        }
        .yzm_btn{
            display: block;
            width: 0.88rem !important;
            box-sizing: border-box;
            padding-left: 0 !important;
            height: 0.32rem !important;
            line-height: 0.32rem !important;
            right: 0;
            font-size: 0.12rem;
            text-align: center;
            color: #FF8200;
            white-space: nowrap;
            overflow: hidden;
            background: rgba(255,130,0,0.10);
            border: 0 solid #FF8200;
            border-radius: 0.0225rem;
            -moz-border-radius: 0.0225rem;
            -webkit-border-radius: 0.0225rem;
            transform: translateY(-50%);
            top:50%;
        }
        .no_choosed .date_item_num{
            color: #d7d7d7 !important;
        }
        .select_wrap{
           /* width: 1.6rem;*/
            height:0.4rem;
            border-radius: 0.02rem;
            -moz-border-radius: 0.02rem;
            -webkit-border-radius: 0.02rem;
            box-sizing: border-box;
            padding-right: 0;
            color: #444;
            background: #fff;
            padding-left: 0.18rem;
        }
        .select_wrap img{
            width: 0.1rem;
            height: 0.08rem;
            margin-left: 0.105rem;
            vertical-align: middle;
            position: relative;
            top:-0.03rem;
        }
        select{
            font-family: PingFangSC-Medium;
            font-size: 0.2rem;
            color: #FF8200;
            letter-spacing: 0;
            background: #fff;
        }
        .note {
            font-family: PingFangSC-Regular;
            font-size:0.12rem;
            float: right;
            color: #D8D8D8;
            letter-spacing: 0;
            height: 0.4rem;
            margin-top: 0.03rem;
        }
    </style>
</head>
<body>
<div class="clearfix" id="yuyue_room">
    <div class="yuyue_form fl">
        <form class="">
            <div class="title">联系方式</div>
            <div class="input_wrap border_bottom">
                <span class="star" style="color:#ff8200;">*</span>
                <input class="yuyue_form_info" type="text" id="username" placeholder="您的称呼，如李先生">
            </div>
            <div class="input_wrap border_bottom">
                <span class="star" style="color:#ff8200;">*</span>
                <input class="yuyue_form_info phone" type="text" placeholder="手机号" id="phone">
            </div>
            <div class="input_wrap border_bottom">
                <span class="star" style="color:#ff8200;">*</span>
                <input type="text" name="yzm" id="validateCode" class="yzm" placeholder="请输入验证码" style="width:65%" required>
                <span class="border_all pa yzm_btn_span"><input type="button" id="yzm" class="yzm_btn pa" value="获取验证码"></input></span>
            </div>
            <div class="date_area clearfix">
                <div class="title">看房日期<span style="font-size: 0.12rem;color: #d7d7d7"></span></div>
                <div class="date_wrap">
                    <div class="fl date_item current" >
                        <div class="date_item_week" >
                            星期二
                        </div>
                        <div class="date_item_num">
                            08
                        </div>
                    </div>
                    <div class="fl date_item" >
                        <div class="date_item_week" >
                            星期二
                        </div>
                        <div class="date_item_num">
                            08
                        </div>
                    </div>
                    <div class="fl date_item">
                        <div class="date_item_week">
                            星期三
                        </div>
                        <div class="date_item_num">
                            09
                        </div>
                    </div>
                    <div class="fl date_item">
                        <div class="date_item_week">
                            星期四
                        </div>
                        <div class="date_item_num">
                            10
                        </div>
                    </div>
                    <div class="fl date_item">
                        <div class="date_item_week">
                            星期五
                        </div>
                        <div class="date_item_num">
                            11
                        </div>
                    </div>
                    <div class="fl date_item">
                        <div class="date_item_week">
                            星期六
                        </div>
                        <div class="date_item_num">
                            12
                        </div>
                    </div>
                    <div class="fl date_item">
                        <div class="date_item_week">
                            星期日
                        </div>
                        <div class="date_item_num">
                            13
                        </div>
                    </div>
                    <div class="fl date_item">
                        <div class="date_item_week">
                            星期一
                        </div>
                        <div class="date_item_num">
                            14
                        </div>
                    </div>
                </div>
            </div>
            <div class="time_area border_bottom clearfix">
                <div class="title">时间选择</div>
                <div class="pr select_wrap fl">
                    <select>
                        <option value="08" style="color: rgba(0,0,0,.4)">08:00</option>
                        <option value="08" style="color: rgba(0,0,0,.4)">09:00</option>
                        <option value="08" style="color: rgba(0,0,0,.4)">10:00</option>
                        <option value="08" style="color: rgba(0,0,0,.4)">11:00</option>
                        <option value="08" style="color: rgba(0,0,0,.4)">12:00</option>
                        <option value="08" style="color: rgba(0,0,0,.4)">13:00</option>
                        <option value="08" style="color: rgba(0,0,0,.4)">14:00</option>
                        <option value="08" style="color: rgba(0,0,0,.4)">15:00</option>
                        <option value="08" style="color: rgba(0,0,0,.4)">16:00</option>
                        <option value="08" style="color: rgba(0,0,0,.4)">17:00</option>
                        <option value="08" style="color: rgba(0,0,0,.4)">18:00</option>
                        <option value="08" style="color: rgba(0,0,0,.4)">19:00</option>
                        <option value="08" style="color: rgba(0,0,0,.4)">20:00</option>
                        <option value="08" style="color: rgba(0,0,0,.4)">21:00</option>
                    </select><img src="../../img/house_list/arrow-bottom.png" alt="">
                </div>
                <div class="note fr">
                    注：看房时间为 8:00 - 21:00
                </div>
            </div>
            <div>
                <button class="yuyue_submit">提交预约</button>
            </div>
        </form>
    </div>
</div>
</div>
<script src="https://cdn.bootcss.com/jquery-weui/1.2.0/js/jquery-weui.min.js"></script>
<script>
    $('form').on('submit',function (e) {
        e.preventDefault()
    })
    $("#username").on('keyup blur',function(){
        checkEmpty($(this));
    });


    $("#phone").on('keyup',function(){
        checkEmpty($(this));
    });
    $("#phone").on('blur',function(){
        checkMobile($(this));
    });
    $("#validateCode").keyup(function(){
        checkEmpty($(this));
    });

    $('#yzm').on('click',function () {
        if(!checkMobile($('#phone'))){

            //alert(false)
            return
        }
        getYzm('yzm',handleFn)
    })

    function handleFn() {
        $.alert("验证码已发送，请注意查收",function () {
            $('#validateCode').prop('disabled',false)
        })
        stopScroll($('.weui-mask'))
    }
    //看房日期
    //看房日期 1-仅周末，2-仅工作日，3-随时看房
    var lookTime = 1
        lookDateChoose(8)
    switch (lookTime) {
        case 1:
            $('.title span').text('(仅周末)')
            $('.week').eq(0).addClass('current')
            $('.week').siblings().not('.week').addClass('no_choosed').removeClass('current')
            break;
        case 2:
            $('.title span').text('(仅工作日)')
            $('.week').addClass('no_choosed').removeClass('current')
            break;
        case 3:
            $('.title span').text('')
            break;
    }
    function lookDateChoose(dayNum) {
        var dateArr = []
        var dayArr = []
        var dateObj = new Date();
        //获取年月日
        var year = dateObj.getFullYear()
        var month = dateObj.getMonth() + 1
        var date = dateObj.getDate()
        for (var i = 0; i < dayNum; i++) {
            dateArr.push(new Date(dateObj.getFullYear(), dateObj.getMonth(), dateObj.getDate() + i));   //把未来几天的时间放到数组里
            var day = "星期" + "日一二三四五六".charAt(dateArr[i].getDay());
            dayArr.push({
                week: day,
                date: dateArr[i].getFullYear() + '-' + (dateArr[i].getMonth() + 1) + '-' + dateArr[i].getDate()
            })
        }
        dayArr.forEach(function (item, index) {
            $('.date_item').eq(index).attr('date', item.date)
            $('.date_item').eq(index).find('.date_item_week').text(item.week)
            if (item.week == '星期六' || item.week == '星期日') {
                $('.date_item').eq(index).addClass('week')
            }
            var ndate = item.date.split('-')[2]
            if (ndate < 10) {
                var date = '0' + ndate
            } else {
                var date = ndate
            }
            $('.date_item').eq(index).find('.date_item_num').text(date)
            $('.date_item').eq(0).find('.date_item_num').text('今天')
        })

        $('.date_item').click(function () {
            if ($(this).hasClass('no_choosed')) {
                return false
            }
            $(this).addClass('current')
            $(this).siblings().removeClass('current')
        })


        $('.yuyue_submit').on('click',function () {
            if(  !checkMobile($('#phone')) || !checkEmpty($('#validateCode')) || !checkEmpty($('#username'))){
                return
            }
            $.toast('提交成功')
        })
    }
</script>
</body>
</html>