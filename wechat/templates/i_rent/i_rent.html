<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta charset="UTF-8">
    <meta content="text/html;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Cache-Control" content="no cache"/>
    <meta http-equiv="Expires" content="0"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no"/>
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <title>我要出租</title>

    <link rel="stylesheet" href="https://cdn.bootcss.com/weui/1.1.2/style/weui.min.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/jquery-weui/1.2.0/css/jquery-weui.min.css">
    <script src="../../js/frame/jquery-1.8.2.min.js"></script>
    <script rel="stylesheet" src="../../js/frame/swiper-3.4.2.jquery.min.js"></script>
    <link rel="stylesheet" href="../../css/frame/swiper-3.4.2.min.css">
    <script src="../../js/DcUtils.js"></script>
    <script src="../../js/HttpUtils.js"></script>
    <script src="../../js/common.js"></script>
    <link rel="stylesheet" href="../../css/frame/mescroll.css">
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/rent.css">
</head>
<body>
<div class="wrapper">
    <div class="progress">
        <ul class="clearfix pr">
            <div class="text1 font_org">填写信息</div>
            <div class="text2">平台审核</div>
            <div class="text3">发布成功</div>
            <div class="step step1 pa">1</div>
            <div class="step step2 pa">2</div>
            <div class="step step3 pa">3</div>
            <div class="bg_line pa"></div>
            <div class="progress_line pa"></div>
        </ul>
    </div>
    <div class="form_area border_top">
        <form action="" id="rentForm">
            <!--类别-->
        <div class="title">类别</div>
        <div class="input_area">
                <div class="clearfix">
                    <label class="second_title" for=""><span>*</span>出租方式</label>
                    <label for="radio1" class="radio_label"> <img src="../../img/login/radio_box_choosed.png" alt="" style="width: 0.24rem">整套出租</label>
                    <label for="radio2" class="radio_label"><img src="../../img/login/radio_box_no.png" alt="" style="width: 0.24rem">单间出租</label>


                    <input type="radio" name="rentway" style="display: none" id="radio1" value="整租" checked>
                    <input type="radio" name="rentway" style="display: none;height: 0.24rem" id="radio2" value="单间出租">
                </div>
            </div>
            <!--基础信息-->
            <div class="title mt32">基础信息</div>
            <div class="input_area">
                <div class="clearfix">

                    <label class="second_title" for=""><span>*</span>选择区域</label>
                    <div class="fl pr select_wrap">
                        <select name="cityCode" id="cityCode" class="require" label="市">
                            <option value="440100000000" select>广州</option>
                        </select><img src="../../img/house_list/arrow-bottom.png" alt="">
                    </div>
                    <div class="fl pr select_wrap">
                        <select name="districtCode" id="districtCode" class="require" label="区">
                            <option value="440100000000" select>荔湾区</option>
                        </select><img src="../../img/house_list/arrow-bottom.png" alt="">
                    </div>
                    <div class="fl pr select_wrap" style="margin-right: 0">
                        <select name="streetCode" id="streetCode" class="require" label="街道">
                            <option value="440103001000" select>沙面街道</option>
                        </select><img src="../../img/house_list/arrow-bottom.png" alt="">
                    </div>
                </div>
            </div>
            <div class="input_area">
                <div class="clearfix">
                    <label class="second_title" for=""><span>*</span>小区名称</label>
                    <div class="fl pr input_wrap w_100">
                        <input class="building_name require max50" type="text" id="villageName" label="小区名称">
                    </div>
                </div>
            </div>
            <div class="input_area  whole_acerage">
                <div class="clearfix">
                    <label class="second_title" for=""><span>*</span>房屋类型</label>
                    <div class="fl pr input_wrap mb12">
                        <input type="text" name="houseRoomNum" class="require int max2" label="卧室数量" style="width: 60%;"><span class="pa unit">室</span>
                    </div>
                    <div class="fl pr input_wrap mb12">
                        <input type="text" class="require int max2" name="houseHallNum" label="厅室数量" style="width: 60%;"><span class="pa unit">厅</span>
                    </div>
                    <div class="fl pr input_wrap mb12" style="margin-right: 0">
                        <input type="text" class="require int max2" name="houseToiletNum" label="卫生间数量" style="width: 60%;"><span class="pa unit">卫</span>
                    </div>
                    <div class="fl pr input_wrap whole_area">
                        <span class="font14_4">共</span><input type="text" label="房屋面积" class="require int max3" name="houseArea" style="width: 30%;"><span class="pa unit">m<sup>2</sup></span>
                    </div>
                    <div class="fl pr select_wrap">
                        <select name="orientationCode" class="orientationCode require" label="房屋朝向">
                            <option value="NS" class="orientation">南北</option>
                            <option value="N" class="orientation">北</option>
                            <option value="S" class="orientation">南</option>
                        </select><img src="../../img/house_list/arrow-bottom.png" alt="">
                    </div>
                    <div class="fl pr select_wrap" style="margin-right: 0">
                        <select name="decorationCode" class="require" label="装修类型">
                            <option value="D201" class="decoration">简单装修</option>
                            <option value="D202" class="decoration">精装</option>
                        </select><img src="../../img/house_list/arrow-bottom.png" alt="">
                    </div>
                </div>
            </div>
            <div class="input_area">
                <div class="clearfix">
                    <label class="second_title" for=""><span>*</span>楼层</label>
                    <div class="fl pr input_wrap">
                        <span class="font14_4">第</span><input type="text" class="require int max3" id="belongFloor" name="belongFloor" label="房屋楼层" style="width: 30%;"><span class="pa unit">层</span>
                    </div>
                    <div class="fl pr input_wrap">
                        <span class="font14_4">共</span><input type="text" class="require int max3" id="totalFloor" name="totalFloor" label="房屋总楼层" style="width: 30%;"><span class="pa unit">层</span>
                    </div>
                    <div class="fl pr select_wrap" style="margin-right: 0">
                        <select class="has_elevtor require" id="hasElevtor" label="有无电梯">
                            <option value="1">有电梯</option>
                            <option value="0">无电梯</option>
                        </select><img src="../../img/house_list/arrow-bottom.png" alt="">
                    </div>
                </div>
            </div>
            <div class="input_area togather_rent_room hide">
                <div class="clearfix">
                    <label class="second_title" for=""><span>*</span>出租间</label>
                    <div class="fl pr input_wrap mb12">
                        <input type="text" class="require " label="出租房间面积" name="houseArea" disabled style="width: 60%;"><span class="pa unit">m<sup>2</sup></span>
                    </div>
                    <div class="fl pr select_wrap mb12">
                        <select name="house_number" class="require" disabled label="出租房间类型">
                            <option value="1">主卧</option>
                            <option value="2">次卧</option>
                            <option value="3">03卧</option>
                        </select><img src="../../img/house_list/arrow-bottom.png" alt="">
                    </div>
                    <div class="fl pr select_wrap mb12" style="margin-right: 0">
                        <select name="sex" class="require" disabled label="出租性别限制">
                            <option value="1">男女不限</option>
                            <option value="2">男</option>
                            <option value="3">女</option>
                        </select><img src="../../img/house_list/arrow-bottom.png" alt="">
                    </div>
                </div>
            </div>
            <div class="input_area">
                <div class="clearfix">
                    <label class="second_title" for=""><span>*</span>租金</label>
                    <div class="fl pr input_wrap" style="width: 1.6rem">
                        <input type="text" class="require int max8" name="rent" label="您计划的租金" style="width: 58%"><span class="pa unit">元/月</span>
                    </div>
                    <div class="fl pr select_wrap" style="width: 1.44rem">
                        <select name="depositWayCode" class="require" label="您理想的付款方式">
                            <option value="">请选择付款方式</option>
                            <option value="Y101" class="depositWay">押一付一</option>
                        </select><img src="../../img/house_list/arrow-bottom.png" alt="">
                    </div>
                </div>
            </div>
            <div class="input_area">
                <div class="clearfix">
                    <label class="second_title" for=""><span>*</span>车位</label>
                    <div class="fl pr select_wrap">
                        <select name="hasCarseat" class="require" label="有无车位">
                            <option value="1">有车位</option>
                            <option value="0">无车位</option>
                        </select><img src="../../img/house_list/arrow-bottom.png" alt="">
                    </div>
                    <div class="fl pr input_wrap" style="width: 1.6rem">
                        <input type="text" class="require int" label="车位价格/月" name="carseatPrice" style="width: 60%"><span class="pa unit">元/月</span>
                    </div>

                </div>
            </div>
            <div class="input_area">
                <div class="clearfix">
                    <label class="second_title" for=""><span>*</span>租金已包含</label>
                    <div class="choose_area" >
                        <ul class="clearfix" id="rentServices">
                            <li class="clearfix">
                                <div class="fl">
                                    <div class="mock_checkbox border_all fl"></div>
                                    <div class="error_desc fl" code="RS001">水费</div>
                                </div>
                                <div class="fl">
                                    <div class="mock_checkbox border_all fl"></div>
                                    <div class="error_desc fl" code="RS002">电费</div>
                                </div>
                                <div class="fl">
                                    <div class="mock_checkbox border_all fl"></div>
                                    <div class="error_desc fl" code="RS003">燃气费</div>
                                </div>
                            </li>
                            <li class="clearfix">
                                <div class="fl">
                                    <div class="mock_checkbox border_all fl"></div>
                                    <div class="error_desc fl" code="RS004">宽带费</div>
                                </div>
                                <div class="fl">
                                    <div class="mock_checkbox border_all fl"></div>
                                    <div class="error_desc fl" code="RS005">物业费</div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!--房源陪套-->
            <div class="title mt32 mb24">房源配套</div>

            <div class="clearfix">
                <div class="matching_icon">
                    <div class="">
                        <img src="../../img/peitao_gray/bed.png" alt="">
                        <div class="equip_name" code="1">床</div>
                    </div>
                    <div class="">
                        <img src="../../img/peitao_gray/yigui.png" alt="">
                        <div class="equip_name" code="2">衣柜</div>
                    </div>
                    <div class="">
                        <img src="../../img/peitao_gray/sofa.png" alt="">
                        <div class="equip_name" code="3">沙发</div>
                    </div>
                    <div class="">
                        <img src="../../img/peitao_gray/tv.png" alt="">
                        <div class="equip_name"  code="4">餐桌椅</div>
                    </div>
                    <div class="">
                        <img src="../../img/peitao_gray/tv.png" alt="">
                        <div class="equip_name"  code="6">电视</div>
                    </div>
                    <div class="">
                        <img src="../../img/peitao_gray/kongtiao.png" alt="">
                        <div class="equip_name"  code="5">空调</div>
                    </div>
                    <div class="">
                        <img src="../../img/peitao_gray/reshuiqi.png" alt="">
                        <div class="equip_name"  code="5">热水器</div>
                    </div>
                    <div class="">
                        <img src="../../img/peitao_gray/xiyiji.png" alt="">
                        <div class="equip_name" code="8">洗衣机</div>
                    </div>
                    <div class="">
                        <img src="../../img/peitao_gray/bingxiang.png" alt="">
                        <div class="equip_name" code="9">冰箱</div>
                    </div>
                    <div class="">
                        <img src="../../img/peitao_gray/wifi.png" alt="">
                        <div class="equip_name" code="10">宽带</div>
                    </div>
                    <div class="">
                        <img src="../../img/peitao_gray/youyanji.png" alt="">
                        <div class="equip_name" code="11">油烟机</div>
                    </div>
                    <div class="">
                        <img src="../../img/peitao_gray/weibolu.png" alt="">
                        <div class="equip_name" code="12">微波炉</div>
                    </div>
                    <div class="">
                        <img src="../../img/peitao_gray/ranqi.png" alt="">
                        <div class="equip_name" code="13">天然气</div>
                    </div>
                    <div class="">
                        <img src="../../img/peitao_gray/xiaodugui.png" alt="">
                        <div class="equip_name" code="14">消毒柜</div>
                    </div>
                </div>
            </div>
            <!--房屋亮点-->
            <div class="title mt32 mb24">房屋亮点</div>
            <div class="input_area">
                <div class="clearfix">
                    <div class="choose_area">
                        <ul class="clearfix" id="roomHighlight">
                            <li class="clearfix">
                                <div class="fl">
                                    <div class="mock_checkbox border_all fl"></div>
                                    <div class="error_desc fl">可短租</div>
                                </div>
                                <div class="fl">
                                    <div class="mock_checkbox border_all fl"></div>
                                    <div class="error_desc fl">南北通透</div>
                                </div>
                                <div class="fl">
                                    <div class="mock_checkbox border_all fl"></div>
                                    <div class="error_desc fl">有阳台</div>
                                </div>

                            </li>
                            <li class="clearfix">
                                <div class="fl">
                                    <div class="mock_checkbox border_all fl"></div>
                                    <div class="error_desc fl">首次出租</div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!--出租要求-->
            <div class="title mt32 mb24">出租要求</div>
            <div class="input_area">
                <div class="clearfix">
                    <div class="choose_area">
                        <ul class="clearfix tags">
                            <li class="clearfix">
                                <div class="fl">
                                    <div class="mock_checkbox border_all fl"></div>
                                    <div class="error_desc fl" code="1">只限女生</div>
                                </div>
                                <div class="fl">
                                    <div class="mock_checkbox border_all fl"></div>
                                    <div class="error_desc fl" code="2">一家人</div>
                                </div>
                                <div class="fl">
                                    <div class="mock_checkbox border_all fl"></div>
                                    <div class="error_desc fl" code="3">禁止宠物</div>
                                </div>

                            </li>
                            <li class="clearfix">
                                <div class="fl">
                                    <div class="mock_checkbox border_all fl"></div>
                                    <div class="error_desc fl" code="4">半年起租</div>
                                </div>
                                <div class="fl">
                                    <div class="mock_checkbox border_all fl"></div>
                                    <div class="error_desc fl" code="5">一年起租</div>
                                </div>
                                <div class="fl">
                                    <div class="mock_checkbox border_all fl"></div>
                                    <div class="error_desc fl" code="6">租户稳定</div>
                                </div>
                            </li>
                            <li class="clearfix">
                                <div class="fl">
                                    <div class="mock_checkbox border_all fl"></div>
                                    <div class="error_desc fl" code="7">禁烟</div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!--小区介绍-->
            <div class="title mt32">小区介绍</div>
            <div class="input_area clearfix">
                <div class="fl clearfix" style="width: 48%;margin-right: 0.06rem">
                    <label class="second_title" for="">建筑年代</label>
                    <div class="fl pr input_wrap w_100">
                        <input type="text" name="buildTime" class="int max4" label="建筑年代" style="width: 60%;">
                    </div>
                </div>
                <div class="fl clearfix" style="width: 48%">
                    <label class="second_title" for="">建筑类型</label>
                    <div class="fl pr select_wrap w_100" >
                        <select type="text" class="int" name="buildingType" label="建筑类型" style="">
                            <option value="1">住宅</option>
                        </select><img src="../../img/house_list/arrow-bottom.png" alt="">
                    </div>
                </div>
                <div class="fl clearfix" style="width: 48%;margin-right: 0.06rem">
                    <label class="second_title" for="">绿化率</label>
                    <div class="fl pr input_wrap  w_100" >
                        <input type="text" class="int max2" name="greenRate" label="绿化率" style="width: 60%;"><span class="pa unit">%</span>
                    </div>
                </div>
               <div class="fl clearfix" style="width: 48%">
                   <label class="second_title" for="">容积率</label>
                   <div class="fl pr input_wrap w_100" style="margin-right: 0;">
                       <input type="text" label="容积率" class="" name="plotRate" style="">
                   </div>
               </div>

            </div>
            <!--详细信息-->
            <div class="title mt32">详细信息</div>
            <div class="input_area">
                <div class="clearfix">
                    <label class="second_title" for=""><span>*</span>看房时间</label>
                    <div class="clearfix">
                        <label for="radio3" class="radio_label"> <img src="../../img/login/radio_box_choosed.png" alt="" style="width: 0.24rem">仅周末</label>
                        <label for="radio4" class="radio_label"><img src="../../img/login/radio_box_no.png" alt="" style="width: 0.24rem">仅工作日</label>
                        <label for="radio5" class="radio_label" style="margin-right: 0"><img src="../../img/login/radio_box_no.png" alt="" style="width: 0.24rem">随时看房</label>

                        <input type="radio" name="looktime" style="display: none" id="radio3" value="1" checked>
                        <input type="radio" name="looktime" style="display: none;height: 0.24rem" id="radio4" value="2">
                        <input type="radio" name="looktime" style="display: none;height: 0.24rem" id="radio5" value="3">
                    </div>
                </div>
            </div>
            <div class="clearfix input_area">
                <div class="fl clearfix">
                    <label class="second_title" for=""><span>*</span>最早入住时间</label>
                    <div class="pr input_wrap" style="width: 2.12rem;">
                        <input name="earliest" id='inRoom' label="最早入住时间" class="start_time earliest require" type="text" value="" placeholder=""/>
                    </div>
                </div>
                <div class="fl clearfix">
                    <label class="second_title" for=""><span>*</span>宜住人数</label>
                    <div class="pr input_wrap" style="width: 1.03rem;margin-right: 0">
                        <input label="您屋子的宜住人数" style="width: 60%" name="persons" class="require people_num persons max1" type="text" value="" placeholder=""/><span class="pa unit">人</span>
                    </div>
                </div>

            </div>
            <div class="input_area">
                <div class="clearfix">
                    <label class="second_title" for=""><span>*</span>标题</label>
                    <div class="fl pr input_wrap w_100">
                        <input label="您的出租标题" name="title" class="house_title require max45" type="text" id="houseTitle">
                    </div>
                </div>

            </div>
            <div class="input_area">
                <div class="clearfix">
                    <label class="second_title" for=""><span>*</span>房源描述</label>
                    <div class=" pr input_wrap w_100" style="height: 0.8rem;box-sizing: content-box">
                                <textarea label="房源描述" class="house_describe require max150" type="text" id="houseDescribe" name="remark"
                                          placeholder="对房源的要求，周边交通及生活配套..."></textarea>
                    </div>
                </div>
            </div>
            <!--uparea  -->

            <div style="margin-bottom: 0.18rem">
                <label class="second_title" for=""><span>*</span>上传图片</label>
            </div>
            <div class="uplaod_tab">
                <div class="selected" code="mainpic">封面</div>
                <div class="" code="1">客厅</div>
                <div code="2">卧室</div>
                <div code="3">厨房</div>
                <div code="4">阳台</div>
                <div code="5">餐厅</div>
                <div code="6">卫生间</div>
                <div code="7">户型</div>
            </div>

            <div class="upload_op_area">
               <!-- <label for="uploaderInput">
                    <div>
                        <img src="../../img/house_detail/upload_icon.png" alt="">
                        <span>上传</span>
                    </div>

                </label>-->
                <div class="weui-gallery" id="gallery">
                    <span class="weui-gallery__img" id="galleryImg"></span>
                    <div class="weui-gallery__opr">
                        <a href="javascript:" class="weui-gallery__del">
                            <i class="weui-icon-delete weui-icon_gallery-delete"></i>
                        </a>
                    </div>
                </div>
                <div class="weui-cells weui-cells_form">
                    <div class="weui-cell">
                        <div class="weui-cell__bd">
                            <div class="weui-uploader">
                                <div class="weui-uploader__bd">
                                    <ul class="weui-uploader__files" id="uploaderFiles">

                                    </ul>
                                    <div class="weui-uploader__input-box">
                                        <input id="uploaderInput" class="weui-uploader__input zjxfjs_file" type="file" accept="image/*" multiple="">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--<input type="file" name="files" accept="image/*" style="display: none" id="upInput"/>-->
            </div>
            <div class="note" style="margin-top: 0.12rem;line-height: 0.18rem">
                注：只能上传房屋图片，不能包含有文字、数字、网址、名片等；最多上传 <i>12</i> 张，每张最大 <i>10</i> M
            </div>

            <!--其他信息-->
            <div class="clearfix">
                <p>其他信息</p>
                <div class="clearfix input_area">
                    <div class="fl clearfix">
                        <label class="second_title" for=""><span>*</span>联系人</label>
                        <div class="pr input_wrap" style="width: 1.03rem;">
                            <input name="connPerson" label="联系人" class="link_man require" type="text" value="" placeholder="">
                        </div>
                    </div>
                    <div class="fl clearfix">
                        <label class="second_title" for=""><span>*</span>联系电话</label>
                        <div class="pr input_wrap" style="width: 2.12rem;margin-right: 0">
                            <input name="connPhone" label="联系电话" class="phone require" type="text" value="" placeholder="">
                        </div>
                    </div>
                </div>
                <div class="clearfix input_area">
                    <div class="clearfix">
                        <label class="second_title" for="">接听时段</label>
                        <div class="fl pr select_wrap" style="width: 1.03rem;">
                            <select id="listenTime0" name="listenTime0" style="padding-left: 25%;" class="start_time" type="text" value="" placeholder="">
                                <option>01:00</option>
                                <option>02:00</option>
                                <option>03:00</option>
                                <option>04:00</option>
                                <option>05:00</option>
                                <option>06:00</option>
                                <option>07:00</option>
                                <option selected>08:00</option>
                                <option>09:00</option>
                                <option>10:00</option>
                                <option>11:00</option>
                                <option>12:00</option>
                                <option>13:00</option>
                                <option>14:00</option>
                                <option>15:00</option>
                                <option>16:00</option>
                                <option>17:00</option>
                                <option>18:00</option>
                                <option>19:00</option>
                                <option>20:00</option>
                                <option>21:00</option>
                                <option>22:00</option>
                                <option>23:00</option>
                                <option>24:00</option>
                            </select><img src="../../img/house_list/arrow-bottom.png" alt="">
                        </div>
                        <div class="fl" style="font-size: 0.14rem;color: #444;vertical-align: middle;margin: 0.12rem 0.06rem">
                            至
                        </div>
                        <div class="fl pr select_wrap" style="width: 1.03rem;">
                            <select  id="listenTime1" name="listenTime1" style="padding-left: 25%;" class="end_time" type="text" value="" placeholder="">
                                <option>01:00</option>
                                <option>02:00</option>
                                <option>03:00</option>
                                <option>04:00</option>
                                <option>05:00</option>
                                <option>06:00</option>
                                <option>07:00</option>
                                <option>08:00</option>
                                <option selected>09:00</option>
                                <option>10:00</option>
                                <option>11:00</option>
                                <option>12:00</option>
                                <option>13:00</option>
                                <option>14:00</option>
                                <option>15:00</option>
                                <option>16:00</option>
                                <option>17:00</option>
                                <option>18:00</option>
                                <option>19:00</option>
                                <option>20:00</option>
                                <option>21:00</option>
                                <option>22:00</option>
                                <option>23:00</option>
                                <option>24:00</option>
                            </select><img src="../../img/house_list/arrow-bottom.png" alt="">
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <div class="tips"><img src="../../img/tip.svg" alt="">已开启隐私保护</div>
        <div class="serve_hot_line">客服热线：<span>400-100-3696</span></div>
        <div class="serve_hot_line_desc">发布过程中如有疑问可以拨打此号码</div>
    </div>

    <div class="btns">
        <button class="clear">保存</button>
        <button class="confirm">提交发布</button>
    </div>
</div>
<script src="https://cdn.bootcss.com/jquery-weui/1.2.0/js/jquery-weui.min.js"></script>
<script>
    var roomPictypes = ''
    var roomPics = ''
    //日历
    calendarPick('inRoom', 'inRoom',closeHandle)
    function closeHandle(){
        setTimeout(function () {

            $.alert('最早选择明天~',function () {
                $('#inRoom').val('')
            })
            stopScroll($('.weui-mask'))
        },350)
    }
    //表单验证
    function validate(){
        var objs = $("#rentForm input,#rentForm select，#rentForm textarea");
        for(var i=0;i<objs.length;i++){
            var obj = objs.eq(i);
            if(obj.hasClass("require")){
                if($.trim(obj.val())=="" && !obj.prop('disabled')){
                    //console.log(obj.prop('disabled'))
                   /* var label = obj.parent().prev().text().trim().replace(/\*!/,'');*/
                   var label = obj.attr("label");
                    console.log(obj.attr('class'))
                    $.alert("请填写"+label,function(){
                        obj.focus();
                    });
                    stopScroll($('.weui-mask'))
                    obj.focus();
                    return false;
                }
            }
        }

        var phones = $(".phone");
        for(var i=0;i<phones.length;i++){
            var obj = phones.eq(i);
            if(!DcUtils.isMobile(obj.val())){
                $.alert("手机号码格式不正确",function(){
                    obj.focus();
                });
                stopScroll($('.weui-mask'))
                return false;
            }
        }

        var ints = $(".int");
        for(var i=0;i<ints.length;i++){
            var obj = ints.eq(i);

            if($.trim(obj.val())!=""&&!DcUtils.isPositiveInteger(obj.val())){

                $.alert("请输入正整数",function(){
                    obj.focus();
                });
                stopScroll($('.weui-mask'))
                return false;
            }
        }

        var belongFloor = $('#belongFloor').val()*1
        var totalFloor = $('#totalFloor').val()*1
        if(belongFloor>totalFloor){

            $.alert("当前楼层不能大于总楼层~",function(){
                $('#belongFloor').focus();
            });
            stopScroll($('.weui-mask'));
            return false;
        }

        for(var j=0;j<objs.length;j++){
            obj = objs.eq(j)
            if($.trim(obj.val())!="" && obj.attr('class') && obj.attr('class').indexOf('max')>-1){
                var max = obj.attr('class').split(' ').reverse()[0].replace(/(max)/g,'')
                if(obj.val().trim().length>max){
                    var label = obj.attr("label");
                    $.alert(label+"数值过大，请填写合适的内容",function(){
                        obj.focus();
                    });
                    stopScroll($('.weui-mask'))
                    return false;
                }

            }

        }


        return true;
    }

    // 框框点击筛选
    $('.mock_checkbox').on('click',function () {
        $(this).toggleClass('choosed')
    });


    // 出租类型 和 看房时间的 筛选
    $('.radio_label').click(function () {
        roomPictypes = ''
        roomPics = ''
        oldCode = ''
        $uploaderFiles.empty()
        $(this).find('img').attr('src','../../img/login/radio_box_choosed.png')
        $(this).siblings('.radio_label').find('img').attr('src','../../img/login/radio_box_no.png')
        if($(this).text().indexOf('单间出租')>-1){
            //$('.whole_acerage').hide()
            $('.togather_rent_room').show();
            //$('.whole_acerage input,.whole_acerage select').prop('disabled',true)
            $('.togather_rent_room input,.togather_rent_room select').prop('disabled',false);
            $('.whole_area').hide()
            $('.whole_area').find('input').prop('disabled',true)
        }else{
            $('.whole_acerage').show()
            $('.togather_rent_room').hide()
            $('.togather_rent_room input,togather_rent_room select').prop('disabled',true)
            //$('.whole_acerage input,.whole_acerage select').prop('disabled',false)
            $('.whole_area').show()
            $('.whole_area').find('input').prop('disabled',false)
        }
    })

    //房屋配套筛选
    var firstTime
    $('.matching_icon>div').on('click',function () {
        var currentTime = new Date().getTime()
        //console.log(currentTime,firstTime)
        if(!firstTime){
            firstTime = currentTime
        }else{
            if(currentTime-firstTime<=300){

                console.log('你手速真快')
                return false
            }
            firstTime = currentTime
        }

        if($(this).hasClass('have')){

            var oldSrc = $(this).find('img').attr('src')
            console.log(oldSrc.split('/'))
            var newSrc = '../../img/peitao_gray/'+oldSrc.split('/').reverse()[0]
            $(this).find('img').attr('src',newSrc)
            $(this).removeClass('have')
        }else{

            var oldSrc = $(this).find('img').attr('src')
            console.log(oldSrc)
            var newSrc = '../../img/peitao_c/'+oldSrc.split('/').reverse()[0]
            $(this).find('img').attr('src',newSrc)
            $(this).addClass('have')
        }

    })

    //上传图片mock

    $('.uplaod_tab div').click(function () {
        $(this).addClass('selected')
        $(this).siblings().removeClass('selected')
    });
    var tmpl = '<li class="weui-uploader__file pr" style="background-image:url(#url#)"><div class="type"><span></span></div></li>',
        $gallery = $("#gallery"),
        $galleryImg = $("#galleryImg"),
        $uploaderInput = $("#uploaderInput"),
        $uploaderFiles = $("#uploaderFiles"),
        imgWrapList = [],
        count=0,
        oldCode = '',
        formData = new FormData();
    $uploaderInput.on("change", function(e) {
        var src, url = window.URL || window.webkitURL || window.mozURL,
            files = e.target.files;
        if(count>=12 || files.length>12){
            $.alert('最多上传12张图片');
            stopScroll($('.weui-mask'))
            return false;
        }
        var isOver = false
        for(var i = 0, len = files.length; i < len; ++i) {
            var file = files[i];

            imgWrapList.forEach(function (item,index) {
                if(file.size == item.size && file.name == item.name){
                    isOver = true
                    $.alert('图片重复',function () {
                        isOver = false
                        $("#uploaderInput").val('')
                    });
                    stopScroll($('.weui-mask'))
                    return false;
                }
            })
            if(isOver){
                return
            }
            imgWrapList.push(file)
            console.log(imgWrapList)
            if (file.size > 10* 1024 * 1024) {
                $.alert('请上传不超过10M的图片');
                stopScroll($('.weui-mask'))
                return false;
            }
            transformFileToFormData(file)

            if(url) {
                src = url.createObjectURL(file);
            } else {
                src = e.target.result;
            }
            count++
            console.log(count)
            var str = '';
            var type = $('.uplaod_tab .selected').attr('code');
            switch (type){
                case 'mainpic':
                    str = '封';
                    break;
                case '1':
                    str = '客';
                    break;
                case '2':
                    str = '卧';
                    break;
                case '3':
                    str = '厨';
                    break;
                case '4':
                    str = '阳';
                    break;
                case '5':
                    str = '餐';
                    break;
                case '6':
                    str = '卫';
                    break;
                case '7':
                    str = '户';
                    break;
            }
            var tmpl1 = (tmpl.split('<span>')[0]+'<span>'+ str +tmpl.split('<span>')[1])
            console.log(tmpl1)
            $uploaderFiles.append($(tmpl1.replace('#url#', src)));
            $.ajax(
                {
                    type: "POST",//通常会用到两种：GET,POST。默认是：GET
                    url:'90',//(默认: 当前页地址) 发送请求的地址
                    data: formData,
                    contentType: false, // 注意这里应设为false
                    processData: false,   //  告诉jquery不要处理发送的数据
                    success: function(res){


                    }, //请求成功
                    error:function(){

                    },//请求出错
                    // 这里的逻辑应放在success中为了测试卸载了complete
                    // '1231.png'+count 英替换为回掉的res.name 之类的
                    //
                    complete: function (res) {
                        if(!oldCode){
                            var code = $('.uplaod_tab .selected').attr('code');
                            oldCode = code
                            roomPictypes+=code //图片所属的类型
                            roomPics+='1231.png'+count//返回图片id 或是name？
                        }else{
                            var code = $('.uplaod_tab .selected').attr('code');
                            if(oldCode!=code){
                                if(roomPictypes.indexOf(code)<0){
                                    oldCode = code
                                    roomPictypes+=(','+code) //图片所属的类型
                                    roomPics+=(';'+'1231.png'+count)//返回图片id 或是name？
                                }else{
                                    var index = roomPictypes.replace(',','').indexOf(code)
                                    //alert(index)
                                    var tempArr = roomPics.split(';')
                                    var str = tempArr[index]
                                    str += (','+'1231.png'+count)
                                    tempArr[index] = str
                                    roomPics = tempArr.join(';')
                                    console.log('121',roomPics)
                                }

                            }else{
                                roomPics+=(','+'1231.png'+count)//返回图片id 或是name？
                            }
                        }


                        //应在complete中
                        $("#uploaderInput").val('');
                        console.log(roomPics,roomPictypes)
                    }//请求完成
                });
        }

    });
    var index; //第几张图片
    $uploaderFiles.on("click", "li", function() {
        index = $(this).index();
        $galleryImg.attr("style", this.getAttribute("style"));

        $gallery.fadeIn(100);
    });
    $gallery.on("click", function() {
        $gallery.fadeOut(100);
    });
    //删除图片（是否需要？
    //）
    $(".weui-gallery__del").click(function() {
        $uploaderFiles.find("li").eq(index).remove();
        console.log(imgWrapList)
        imgWrapList.splice(index,1);
        console.log(imgWrapList)
        if(imgWrapList.length == 0){
            roomPics = '';
            roomPictypes = '';
            oldCode = '';
        }else{
           var delId =  roomPics.replace(/;/g,',').split(',')[index];//要删除的元素
            alert(index)
            alert(delId)

            roomPics = roomPics.replace(delId+',','')
            roomPics = roomPics.replace(','+delId,'')
            roomPics = roomPics.replace(delId,'')
            var arr = roomPics.split(';')
            console.log(arr)
            arr.forEach(function (item,index0) {
                if(!item){
                        //console.log(roomPictypes.split(','))
                    var tempArr =  roomPictypes.split(',')

                    tempArr.splice(index0,1)
                    console.log(tempArr)
                    roomPictypes = tempArr.join(',')
                }
            })
        }
        roomPics = roomPics.replace(/;;/g,';')
        if(roomPics.charAt(0) == ';'){
            roomPics = roomPics.substring(1, roomPics.length());
        }
        console.log(roomPics,roomPictypes)
        count--;
        //对应删除库里的图片？
    });
    function transformFileToFormData(file) {
        // 自定义formData中的内容
        // type
        formData.append('type', file.type);
        // size
        formData.append('size', file.size || "image/jpeg");
        // name
        formData.append('name', file.name);
        // lastModifiedDate
        formData.append('lastModifiedDate', file.lastModifiedDate);
        // append 文件
        formData.append('files', file);

    }

    //表单序列化为对象
    jQuery.prototype.serializeObject=function(){
        var obj=new Object();
        $.each(this.serializeArray(),function(index,param){
            if(!(param.name in obj)){
                obj[param.name]=param.value;
            }
        });
        return obj;
    };

    $('.confirm').click(function () {
        //有无车位 对用后面的价格校验
        if($('select[name=hasCarseat]').val()!=1){
            $('select[name=hasCarseat]').parent().next().find('input').removeClass('require')
        }else{
            $('select[name=hasCarseat]').parent().next().find('input').addClass('require')
        }
        if(!validate()){
            return
        }
        var serializeUrl = $("#rentForm").serializeObject();
        serializeUrl.listenTime = serializeUrl.listenTime0+','+serializeUrl.listenTime1;
        switch (serializeUrl.orientationCode) {
            case "E":
                serializeUrl.orientation = "东";
                break;
            case "W":
                serializeUrl.orientation = "西";
                break;
            case "S":
                serializeUrl.orientation = "南";
                break;
            case "N":
                serializeUrl.orientation = "北";
                break;
            case "SE":
                serializeUrl.orientation = "东南";
                break;
            case "NE":
                serializeUrl.orientation = "东北";
                break;
            case "SW":
                serializeUrl.orientation = "西南";
                break;
            case "NW":
                serializeUrl.orientation = "西北";
                break;
            case "NS":
                serializeUrl.orientation = "南北";
                break;
            case "WE":
                serializeUrl.orientation = "东西";
                break;
            default:
                serializeUrl.orientation = ''
                break;
        }
        switch (serializeUrl.decorationCode) { //这里的code是假的
            case "D202":
                serializeUrl.decoration = "精装";
                break;
            case "D201":
                serializeUrl.decoration = "简装";
                break;

            default:
                serializeUrl.decoration = ''
                break;
        }
        switch (serializeUrl.buildingType) { //这里的code不全的
            case "1":
                serializeUrl.building = "住宅";
                break;
            default:
                serializeUrl.building = ''
                break;
        }
        var rentServicesCodeArr = [] //租金包含
        var roomHighlightArr = []//房屋亮点
        var roomMathcing = [] //房屋配套
        var roomMathcingCode = [] //房屋配套
        var tagsArr = []//出租要求
        var tagsCodeArr = []//出租要求
        $('#rentServices .choosed').each(function (index,item) {
            rentServicesCodeArr.push($(item).next().attr('code'))

        })
        $('#roomHighlight .choosed').each(function (index,item) {
            roomHighlightArr.push($(item).next().text().trim())

        })
        $('.tags .choosed').each(function (index,item) {
            tagsArr.push($(item).next().text().trim())
            tagsCodeArr.push($(item).next().attr('code'))
        })
        $('.have').each(function (index,item) {
            roomMathcing.push($(item).find('.equip_name').text())
            roomMathcingCode.push($(item).find('.equip_name').attr('code'))
        })
        //var issueStr = issueArr.join(',')
        var roomMatchingStr = roomMathcing.join(',');
        var roomMathcingCode = roomMathcingCode.join(',');
        var rentServicesCode = rentServicesCodeArr.join(',');
        var roomHighlight = roomHighlightArr.join(',');
        var tags = tagsArr.join(',');
        var tagsCodes = tagsCodeArr.join(',');
        serializeUrl.roomAllocation = roomMatchingStr;
        serializeUrl.roomAllocationCode = roomMathcingCode;
        serializeUrl.rentServicesCode = rentServicesCode;
        serializeUrl.roomHighlight = roomHighlight;
        serializeUrl.tags = tags;
        serializeUrl.tagsCodes = tagsCodes;
        serializeUrl.roomPictypes = roomPictypes;
        serializeUrl.roomPics = roomPics;
        /*if(!issueStr){alert(1)}*/
        //console.log(issueStr)
        console.log(roomMatchingStr)
        console.log(serializeUrl);
        $.confirm('请仔细检查每一项，确认提交么',function(){
            $.toast('提交成功')
        },function () {

        })
    })
    //接听时段
    //console.log($('#listenTime0'))
    $('#listenTime0').on('change',function () {
        $('#listenTime1').html('')
        var start = $(this).val().trim().substring(0,2)
        var length = (start.charAt(0)==0)?(+start.substring(1,2)):(+start)
        console.log(start,length)
        for(var i=length+1;i<=24;i++){
            var str = i>=10?i:('0'+i)
            $('#listenTime1').append('<option>'+str+':00</option>')
        }
    })
</script>
</body>
</html>